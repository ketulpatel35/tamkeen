<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--Header for Attendance summary report-->
    <template id="attendance_summary_report_header"
              name="attendance_summary_report_header">
        <t t-foreach="docs" t-as="o">
            <div class="header">
                 <div class="col-xs-8"
                         style="padding-top: 8%;font-size:12px;overflow:hidden;text-overflow: ellipsis;">
                        <!--<t t-if="o.name">-->
                            <!--<t t-if="o.code">-->
                                <!--[<t t-esc="o.code"/>] <t t-esc="o.name"/>-->
                            <!--</t>-->
                        <!--</t>-->
                    </div>
                <div class="col-xs-4 text-right"
                     style="padding-bottom:15px;font-size:17px;">
                    <img class="img-responsive" src="/hr_attendance_employee_summary/static/src/img/logo_english.jpg" width="230px" height="75px"/>
                </div>
                <div class="col-xs-1-5">
                    <div style="float:left;font-size:10px;">
                        Printed On:
                        <span
                                t-esc="context_timestamp(datetime.datetime.now()).strftime('%d-%b-%Y')"/>
                        <br/>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!--Footer for attendance report-->
    <template id="attendance_summary_report_footer"
              name="attendance_summary_report_footer">
        <t t-foreach="docs" t-as="o">
            <div class="footer">
                <div class="row">
                    <div class="col-xs-6" style="border-top: 1px solid #808080;font-size:12px;color:#808080;">
                        <t t-if="o.company_id">
                            <b>Address:</b>
                            <span>
                                <t t-if="o.company_id.street">
                                    <span t-field="o.company_id.street"/>
                                </t>
                                -
                                <t t-if="o.company_id.street2">
                                    <span t-field="o.company_id.street2"/>
                                </t>
                            </span>
                              <b>City:</b>
                            <span>
                                <t t-if="o.company_id.city">
                                    <span t-field="o.company_id.city"/>
                                </t>
                            </span>
                              <b>Tel:</b>
                            <span>
                                <t t-if="o.company_id.phone">
                                    <span t-field="o.company_id.phone"/>
                                </t>
                            </span>
                        </t>
                    </div>
                    <div class="col-xs-6" style="text-align:right;border-top: 1px solid #808080;">
                        <small>
                            <span>Page</span>
                            <span class="page" />
                            of
                            <span class="topage" />
                        </small>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!--Header footer for attendance report-->
    <template id="attendance_summary_report_header_footer">
        <t t-call="hr_attendance_employee_summary.attendance_summary_report_header"/>
        <t t-raw="0"/>
        <t t-call="hr_attendance_employee_summary.attendance_summary_report_footer"/>
    </template>
    <template id="report_attendance_new">
        <t t-call="report.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="hr_attendance_employee_summary.attendance_summary_report_header_footer">
                    <div class="page">
                        <t t-foreach="_get_employee_name" t-as="employee">
                            <div class="mb32">
                                <h5>Attendance Summary for :
                                    <span style="font-size:14px;">
                                        <t t-esc="employee.name"/></span></h5>
                            </div>
                            <t t-set="info" t-value="get_header_info"/>
                            <h5 class="text-center mb32">
                                From
                                <u>
                                    <t t-esc="info['start_date']"/>
                                </u>
                                To
                                <u>
                                    <t t-esc="info['end_date']"/>
                                </u>
                            </h5>
                            <table class="table table-bordered mb32" width="100%"
                                   height="100%" style="font-size:12px;">
                                <t t-set="col_len" t-value="1"/>
                                <thead>
                                    <tr>
                                        <th>Month</th>
                                        <t t-foreach="get_months" t-as="month">
                                            <t t-set="col_len"
                                               t-value="month['days']"/>
                                            &lt;th class="text-center" colspan=<t
                                                t-esc="month['days']"/>&gt;<t
                                                t-esc="month['month_name']"/>&lt;/th&gt;
                                        </t>
                                        <!--<th/>-->
                                    </tr>
                                    <tr>
                                        <td rowspan="2">
                                        </td>
                                        <t t-foreach="_get_day(employee)"
                                           t-as="day">
                                            &lt;td class="text-center oe_leftfit
                                            oe_rightfit" style="background-color:<t
                                                t-esc="day['color']"/>!important;
                                            font-size: 8px; min-width: 18px"&gt; <t
                                                t-esc="day['day_str']"/>&lt;/td&gt;
                                        </t>
                                        <!--<td/>-->
                                    </tr>
                                    <tr>
                                        <t t-foreach="_get_day(employee)"
                                           t-as="day">
                                            &lt;td class="text-center oe_leftfit
                                            oe_rightfit" style="background-color:<t
                                                t-esc="day['color']"/>!important;
                                            font-size: 10px" &gt; <t
                                                t-esc="day['day']"/>&lt;/td&gt;
                                        </t>
                                        <!--<td></td>-->
                                    </tr>
                                </thead>
                                <tbody>
                                    <t
                                            t-foreach="get_data_from_report(employee)" t-as="obj">
                                        <tr t-foreach="obj['data']" t-as="attendance">
                                            <td>
                                                <strong>Sign In</strong>
                                            </td>
                                            <t t-foreach="attendance['display']"
                                               t-as="details">
                                                &lt;td class="text-center oe_leftfit
                                                oe_rightfit" style="background-color:<t
                                                    t-esc="details['check_in_color']"/>
                                                !important; font-size: 10px" &gt; <t
                                                    t-esc="details['check_in']"/>&lt;/td&gt;
                                            </t>

                                        </tr>
                                        <tr t-foreach="obj['data']" t-as="attendance">
                                            <td>
                                                <strong>Sign Out</strong>
                                            </td>
                                            <t t-foreach="attendance['display']"
                                               t-as="details">
                                                &lt;td class="text-center oe_leftfit
                                                oe_rightfit" style="background-color:<t
                                                    t-esc="details['check_out_color']"/>
                                                !important; font-size: 10px" &gt; <t
                                                    t-esc="details['check_out']"/>&lt;/td&gt;
                                            </t>

                                        </tr>
                                        <tr t-foreach="obj['data']" t-as="attendance">
                                            <td>
                                                <strong>Permission Hours</strong>
                                            </td>
                                            <t t-foreach="attendance['display']"
                                               t-as="details">
                                                &lt;td class="text-center oe_leftfit
                                                oe_rightfit"
                                                style="background-color:white!important;
                                                font-size: 10px" &gt; <t
                                                    t-esc="details['permission_hours']"/>&lt;/td&gt;
                                            </t>

                                        </tr>

                                        <tr t-foreach="obj['data']" t-as="attendance">
                                            <td>
                                                <strong>Worked Hours</strong>
                                            </td>
                                            <t t-foreach="attendance['display']"
                                               t-as="details">
                                                &lt;td class="text-center oe_leftfit
                                                oe_rightfit"
                                                style="background-color:white!important;
                                                font-size: 10px" &gt; <t
                                                    t-esc="details['worked_hours']"/>&lt;/td&gt;
                                            </t>
                                        </tr>
                                        <t t-set="att_data" t-value="obj['data']"/>
                                        <tr>
                                            <td colspan="4">
                                                <strong style="font-size:12px;">Total
                                                    Worked Hours</strong>
                                            </td>
                                            &lt;td colspan=<t t-esc="col_len"/>&gt;
                                            <t t-if="att_data">
                                                <t t-esc="att_data[0]['total_wh']"/>
                                            </t>
                                            &lt;/td&gt;
                                        </tr>
                                        <tr>
                                            <td colspan="4">
                                                <strong style="font-size:12px;">Total Permission
                                                    Hours</strong>
                                            </td>
                                            &lt;td colspan=<t t-esc="col_len"/>&gt;
                                            <t t-if="att_data">
                                                <t t-esc="att_data[0]['total_ph']"/>
                                            </t>
                                            &lt;/td&gt;
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                            <br/>
                            <br/>
                            <br/>
                            <br/>
                        </t>
                        <div class="col-xs-3 col-xs-offset-5 mt32">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th class="col-xs-1">Color</th>
                                        <th class="text-center">Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="get_attendance_config"
                                        t-as="attendance_config">
                                        &lt;td style=background-color:<t  t-esc="attendance_config['color_name']"/>
                                        !important &gt;&lt;/td&gt;
                                        <td style="font-size:12px;">
                                            <t t-esc="attendance_config['name']"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

</odoo>
