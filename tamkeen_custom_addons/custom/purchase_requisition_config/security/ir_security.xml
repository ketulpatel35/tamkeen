<?xml version="1.0" ?>
<odoo>
    <data>
        <record model="ir.module.category" id="purchase_requisition">
            <field name="name">Purchase Requisition</field>
            <field name="sequence">7</field>
        </record>

        <record id="group_analytic_distribution_readonly" model="res.groups">
            <field name="name">Analytic Distribution (ReadOnly)</field>
            <field name="category_id" ref="purchase_requisition"/>
        </record>

        <record id="group_normal_user_pr" model="res.groups">
            <field name="name">Normal User</field>
            <field name="category_id" ref="purchase_requisition"/>
            <field name="implied_ids"
                   eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="group_manager_approval_pr" model="res.groups">
            <field name="name">Manager Approval</field>
            <field name="category_id" ref="purchase_requisition"/>
            <field name="implied_ids"
                   eval="[(4, ref('purchase_requisition_config.group_normal_user_pr'))]"/>
        </record>

        <record id="group_vp_approval_pr" model="res.groups">
            <field name="name">VP Approval</field>
            <field name="category_id" ref="purchase_requisition"/>
            <field name="implied_ids"
                   eval="[(4, ref('purchase_requisition_config.group_normal_user_pr'))]"/>
        </record>

        <record id="group_ceo_approval_pr" model="res.groups">
            <field name="name">CEO Approval</field>
            <field name="category_id" ref="purchase_requisition"/>
            <field name="implied_ids"
                   eval="[(4, ref('purchase_requisition_config.group_normal_user_pr'))]"/>
        </record>

        <record id="group_procurement_officer_pr" model="res.groups">
            <field name="name">Procurement Officer</field>
            <field name="category_id" ref="purchase_requisition"/>
            <field name="implied_ids"
                   eval="[(4, ref('purchase_requisition_config.group_normal_user_pr'))]"/>
        </record>

        <record id="group_procurement_review" model="res.groups">
            <field name="name">PR Review</field>
            <field name="category_id" ref="purchase_requisition"/>
            <field name="implied_ids"
                   eval="[(4, ref('purchase_requisition_config.group_normal_user_pr'))]"/>
        </record>

        <record id="group_procurement_manager_pr" model="res.groups">
            <field name="name">Procurement Manager</field>
            <field name="category_id" ref="purchase_requisition"/>
            <field name="implied_ids"
                   eval="[(4, ref('group_procurement_officer_pr'))]"/>
        </record>

        <record id="group_view_all_pr" model="res.groups">
            <field name="name">View All Purchase Requisition</field>
            <field name="category_id" ref="purchase_requisition"/>
             <field name="implied_ids"
                   eval="[(4, ref('purchase_requisition_config.group_normal_user_pr'))]"/>
        </record>

        <record id="group_budget_approval_pr" model="res.groups">
            <field name="name">Budget Approval</field>
            <field name="category_id" ref="purchase_requisition"/>
             <field name="implied_ids"
                   eval="[(4, ref('purchase_requisition_config.group_normal_user_pr'))]"/>
        </record>

        <record id="purchase_requisition_account_ceo" model="ir.rule">
            <field name="name">CEO Approval</field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition" />
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4,ref('group_ceo_approval_pr'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="False" />
        </record>

        <record id="purchase_requisition_employee_rec" model="ir.rule">
            <field name="name">Normal User</field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition" />
            <field name="domain_force">[('employee_ids.user_id.id','=',user.id)]</field>
            <field name="groups" eval="[(4,ref('group_normal_user_pr'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="False" />
        </record>

        <record id="purchase_requisition_budget_approval" model="ir.rule">
            <field name="name">Budget Approval</field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition" />
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4,ref('group_budget_approval_pr'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="False" />
        </record>

        <!-- PR Review -->
        <record id="purchase_requisition_review_rule" model="ir.rule">
            <field name="name">Procurement Review</field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups"
                   eval="[(4,ref('purchase_requisition_config.group_procurement_review'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="False" />
        </record>

        <record id="purchase_requisition_user_to_write" model="ir.rule">
            <field name="name">Procrument Officer </field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition" />
            <field name="domain_force">[('user_id.id','=',user.id)]</field>
            <field name="groups" eval="[(4,ref('group_procurement_officer_pr'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="True" />
        </record>
        <!-- here -->
        <record id="purchase_requisition_userss" model="ir.rule">
            <field name="name">Procrument Manager</field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition" />
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4,ref('group_procurement_manager_pr'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="True" />
        </record>

        <record id="purchase_requisition_vp" model="ir.rule">
            <field name="name">VP Approval</field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition" />
            <!--<field name="domain_force">[('employee_ids.department_id.id','child_of', [user.employee_ids[0].department_id.id])]-->
            <!--</field>-->
            <!--<field name="domain_force">[('employee_ids.id','child_of', [user.employee_ids[0].id])]-->
            <!--</field>-->
            <field name="domain_force">[('employee_ids.pr_vp_id.user_id.id', '=',user.id)]</field>
            <field name="groups" eval="[(4,ref('group_vp_approval_pr'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="False" />
        </record>

        <record id="purchase_requisition_mgt_emp" model="ir.rule">
            <field name="name">Manager Approval</field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition" />
            <field name="domain_force">[('employee_ids.pr_manager_id.user_id.id','=',user.id)]</field>
            <field name="groups" eval="[(4,ref('group_manager_approval_pr'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="False" />
        </record>

        <record id="purchase_requisition_view_all" model="ir.rule">
            <field name="name">View All PR</field>
            <field name="model_id" ref="purchase_requisition.model_purchase_requisition" />
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4,ref('group_view_all_pr'))]" />
            <field name="perm_read" eval="True" />
            <field name="perm_write" eval="True" />
            <field name="perm_create" eval="True" />
            <field name="perm_unlink" eval="False" />
        </record>

    </data>
</odoo>
