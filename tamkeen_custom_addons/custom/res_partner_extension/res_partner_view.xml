<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="act_res_partner_payments" model="ir.actions.act_window">
            <field name="name">Payments</field>
            <field name="res_model">account.payment</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_partner_id': [active_id], 'default_partner_id': active_id}</field>
            <field name="domain">[('partner_id', 'child_of', active_id)]</field>
        </record>

        <record id="res_partner_for_view_all" model="ir.ui.view">
            <field name="name">res.partner.for.view.all</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[1]" position="attributes">
                    <attribute name="groups">res_partner_extension.group_all_partner</attribute>
                </xpath>
                <xpath expr="//page[@name='internal_notes']" position="attributes">
                    <attribute name="groups">res_partner_extension.group_all_partner</attribute>
                </xpath>
                <xpath expr="//page[@name='sales_purchases']" position="attributes">
                    <attribute name="groups">res_partner_extension.group_all_partner</attribute>
                </xpath>
            </field>
        </record>

        <record id="account.view_partner_property_form"
                model="ir.ui.view">
            <field name="groups_id" eval="[(6, 0, [ref('res_partner_extension.group_update_partner_info')])]" />
        </record>

        <record id="view_partner_property_form_for_group" model="ir.ui.view">
            <field name="name">res.partner.for.view.all.for.group</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="account.view_partner_property_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='accounting']/group[1]"
                       position='after'>
                    <field name="bank_ids">
                        <tree string="Bank Details">
                            <field name="sequence" invisible="1"/>
                            <field name="bank_name"/>
                            <field name="acc_number"/>
                            <field name="partner_id"/>
                        </tree>
                    </field>
                </xpath>
                <xpath expr="//page[@name='accounting']/group[1]"
                       position='before'>
                    <group col="4" colspan="4">
                        <field name="credit_limit"/>
                        <field name="last_time_entries_checked"
                               string="Latest Full Reconciliation Date"/>
                    </group>
                </xpath>
                <xpath expr="//group[@name='accounting_entries']" position="attributes">
                    <attribute name="groups">res_partner_extension.group_update_partner_info</attribute>
                </xpath>
            </field>
        </record>

        <record id="res_partner_view_smart_buttons_inherit" model="ir.ui.view">
            <field name="name">res.partner.form.payments</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr='//div[@name="button_box"]' position='inside'>
                    <button class="oe_stat_button" type="action" name="%(act_res_partner_payments)d"
                            icon="fa-usd">
                        <field string="Payments" name="supplier_payments_count" widget="statinfo"/>
                    </button>
                    <button type="action" class="oe_stat_button"
                            name="%(account.action_account_moves_all_tree)d"
                            icon="fa-list">
                        <field string="Journal Items" name="journal_item_count" widget="statinfo"/>
                    </button>
                </xpath>
                <xpath expr="//field[@name='lang']"
                       position='after'>
                    <field name="date"/>
                </xpath>
                <field name="phone" position="attributes">
                    <attribute
                            name="attrs">{'required':[('company_type','=','company'),('supplier','=',True)
                        ]}</attribute>
                </field>
                <field name="country_id" position="attributes">
                    <attribute
                            name="attrs">{'required':[('company_type','=','company'),('supplier','=',True)
                        ]}</attribute>
                </field>
                <field name="mobile" position="attributes">
                    <attribute
                            name="attrs">{'required':[('company_type','=','company'),('supplier','=',True)
                        ]}</attribute>
                </field>
                <field name="email" position="attributes">
                    <attribute
                            name="attrs">{'required':[('company_type','=','company'),('supplier','=',True)
                        ]}</attribute>
                </field>
            </field>
        </record>

        <!-- For Data Migration-->
        <record id="view_res_partner_filter_inherit_for_domain" model="ir.ui.view">
            <field name="name">view.res.partner.filter.inherit.for.domain</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_res_partner_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='customer']" position="attributes">
                    <attribute name="domain">[('customer','=',1)]</attribute>
                </xpath>
                <xpath expr="//filter[@name='supplier']" position="attributes">
                    <attribute name="domain">[('supplier','=',1)]</attribute>
                </xpath>
            </field>
        </record>

        <record id="purchase.res_partner_view_purchase_account_buttons"
                model="ir.ui.view">
            <field name="groups_id" eval="[(4,ref('base.group_partner_manager'))]"/>
        </record>

        <record id="purchase.res_partner_view_purchase_buttons"
                model="ir.ui.view">
            <field name="groups_id" eval="[(4,ref('base.group_partner_manager'))]"/>
        </record>

        <!-- Inherit Form View to Modify it -->
        <record id="res_partner_vendor_registration" model="ir.ui.view">
            <field name="name">view.res.partner.form.inherit.for
                .attrs</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="vendor_registration.view_partner_form_registration_vendor"/>
            <field name="arch" type="xml">
                 <field name="commercial_registration_expiry_date"
                       position="after">
                    <field name="zakat_number"
                            attrs="{'required':[('company_type','=','company'),
                                                ('supplier','=',True),
                                                ('is_local_sa','=',True)]}"/>
                     <field name="is_local_sa" invisible="1"/>
                </field>
                <field name="commercial_registration" position="attributes">
                    <attribute
                            name="attrs">{'required':[('company_type','=','company'),('supplier','=',True)
                        ]}</attribute>
                </field>
                 <field name="commercial_registration_expiry_date" position="attributes">
                    <attribute
                            name="attrs">{'required':[('company_type','=','company'),('supplier','=',True)
                        ]}</attribute>
                </field>
            </field>
        </record>

        <!-- Inherit Form View to Modify vat field -->
        <record id="view_partner_form_inherit_for_vat" model="ir.ui.view">
            <field name="name">res.partner.vat.inherit.required</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="ksa_vat.view_partner_ksa_vat_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='vat']" position="attributes">
                     <attribute
                            name="attrs">{'required':[('is_local_sa', '=', True),('company_type','=','company'),('supplier','=',True)]}</attribute>
                    <attribute name="string">VAT</attribute>
                </xpath>

            </field>
        </record>
    </data>
</odoo>
