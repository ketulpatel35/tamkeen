<odoo>
    <data>
        <template id="purchase_payment_report_template">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="purchase_order_report.purchase_payment_report_template_header_footer_call_template_id">
                        <div class="page">
                            <div class="oe_structure"/>
                            <div class="row">
                                <style type="text/css">
                                    table.foobar tr td{
                                    text-align:center;
                                    }
                                </style>
                                <h3>
                                    <center>Purchase Order Status</center>
                                </h3>
                                <br/>
                                <!-- Purchase Order Information -->
                                <table class="table table-bordered foobar"
                                       width="100%"
                                       style="border:1px solid black;border-collapse:collapse;font-size:13px;align:center;">
                                    <tbody>
                                        <tr>
                                            <td height="10%" colspan="5"
                                                style="border:1px solid black;"
                                            >
                                                <b>Purchase Order
                                                    Information
                                                </b>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <b>PO #</b>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <b>Supplier
                                                    Name
                                                </b>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <b>PO
                                                    Status
                                                </b>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <b>Discount
                                                </b>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <b>Total</b>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <span t-esc="o.name"/>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <span t-esc="o.partner_id.name"/>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <span t-esc="o.state"/>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                0.00
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <span t-esc="o.amount_total"/>
                                                <span t-esc="o.currency_id.symbol"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br/>
                                <!-- Payments Information -->
                                <table class="table table-bordered foobar"
                                       width="40%"
                                       style="border:1px solid black;border-collapse:collapse;font-size:13px;align:center;">
                                    <tbody>
                                        <tr>
                                            <td height="10%" colspan="3"
                                                style="border:1px solid black;"
                                            >
                                                <b>Payments Information</b>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <b># Paid
                                                    Payments
                                                </b>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <b>Paid
                                                    Amount
                                                </b>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <b>Remaining
                                                    Amount
                                                </b>
                                            </td>
                                        </tr>
                                        <t t-set="payment_data"
                                           t-value="get_payment_status(o)"/>
                                        <tr>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <span t-esc="payment_data['paid_count']"/>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <span t-esc="payment_data['paid_amount']"/>
                                            </td>
                                            <td height="10%"
                                                style="border:1px solid black;">
                                                <span t-esc="o.amount_total - payment_data['paid_amount']"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <br/>
                                <!-- Invoice details -->
                                <t t-set="invoice_rec_list"
                                   t-value="get_related_invoice(o)"/>
                                <t t-if="invoice_rec_list">
                                    <center>
                                        <b>
                                            <div class="oe_title">Related Invoice
                                                With It's Payments
                                            </div>
                                        </b>
                                    </center>
                                    <b>Invoice :</b>
                                    <table class="table table-bordered foobar"
                                           width="100%"
                                           style="border:1px solid black;border-collapse:collapse;font-size:13px;align:center;">
                                        <tbody>
                                            <tr>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Invoice
                                                        Number
                                                    </b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Invoice
                                                        Date
                                                    </b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Due
                                                        Date
                                                    </b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Total</b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Paid
                                                        amount
                                                    </b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;"
                                                >
                                                    <b>Status</b>
                                                </td>
                                            </tr>
                                            <tr t-foreach="invoice_rec_list"
                                                t-as="inv_rec">
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="inv_rec.number"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="inv_rec.date_invoice"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="inv_rec.date_due"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="inv_rec.amount_total"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="inv_rec.amount_total - inv_rec.residual"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="inv_rec.state"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <br/>
                                </t>
                                <br/>
                                <t t-set="payment_rec_list"
                                   t-value="get_invoice_related_payment(o)"/>
                                <t t-if="payment_rec_list">
                                    <b>Invoice Payment :</b>
                                    <table class="table table-bordered foobar"
                                           width="100%"
                                           style="border:1px solid black;border-collapse:collapse;font-size:13px;align:center;">
                                        <tbody>
                                            <tr>
                                                <td height="10%" width="10%"
                                                    style="border:1px solid black;"
                                                >
                                                    <b>#</b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Reference
                                                    </b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Payment
                                                        Method
                                                    </b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Date</b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <b>Amount(
                                                        <span t-esc="o.currency_id.symbol"/>
                                                        )
                                                    </b>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;"
                                                >
                                                    <b>Status</b>
                                                </td>
                                            </tr>
                                            <t t-set="count" t-value="1"/>
                                            <tr t-foreach="payment_rec_list"
                                                t-as="pay_rec">
                                                <td height="10%" width="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="count"/>
                                                    <t t-set="count"
                                                       t-value="count+1"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="pay_rec.name"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="pay_rec.journal_id.name"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="pay_rec.payment_date"/>
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span
                                                            t-esc="pay_rec.amount"/>
                                                    (
                                                    <span t-esc="o.currency_id.symbol"/>
                                                    )
                                                </td>
                                                <td height="10%"
                                                    style="border:1px solid black;">
                                                    <span t-esc="pay_rec.state"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </t>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <template id="purchase_payment_report_template_header_footer_call_template_id">
            <t t-call="purchase_order_report.purchase_payment_report_template_header_template_id"/>
            <t t-raw="0"/>
        </template>

        <template id="purchase_payment_report_template_header_template_id">
            <div class="header">
                <div class="text-left">
                    <img class="img-responsive"
                         src="/purchase_order_report/static/description/icon.png" width="200px" height="75px"/>
                </div>
            </div>
        </template>
    </data>
</odoo>